<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Implementing Service Oriented Architecture using Http is a horrible&nbsp;idea - The Janus List</title>	
	<meta name="author" content="Kushagra Sinha">
	

  <meta name="description" content="Service Oriented Architecture is a commonly used design pattern in distributed and enterprise applications. It involves the creation and use of independent services that work together to produce the desired result. The most important benefits, of course, are separation of concerns and the ability to scale each service independent of ...">



	<link rel="stylesheet" href="http://www.j4nu5.com/theme/css/main.css" type="text/css" />
		
	  <script type="text/javascript" src="http://www.j4nu5.com/theme/js/custom_scripts.js"></script>


    <link href="http://www.j4nu5.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Janus List Atom Feed" />
</head>
	
<body>

    <div class="container">
	  
	  <header role="banner">
	    <div class="feeds">
	        <a href="http://www.j4nu5.com/feeds/all.atom.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="atom feed"/></a>
	    </div>
	      <nav class="pages">
			  <a href="http://www.j4nu5.com/pages/about.html">About</a>
-			  <a href="http://www.j4nu5.com/pages/contact.html">Contact</a>
	      </nav>
		<a href="http://www.j4nu5.com" class="title">The Janus List</a>
      </header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
		
		<h1>Implementing Service Oriented Architecture using Http is a horrible&nbsp;idea</h1>
		
<div class="metadata">
  <time datetime="2014-11-16T00:00:00" pubdate>Sun 16 November 2014</time>
    <address class="vcard author">
      by <a class="url fn" href="http://www.j4nu5.com/author/kushagra-sinha.html">Kushagra Sinha</a>
    </address>
  in <a href="http://www.j4nu5.com/category/programming.html">Programming</a>
<p class="tags">tagged <a href="http://www.j4nu5.com/tag/programming.html">programming</a>, <a href="http://www.j4nu5.com/tag/infrastructure.html">infrastructure</a></p></div>		
		<p><a class="reference external" href="http://en.wikipedia.org/wiki/Service-oriented_architecture">Service Oriented Architecture</a>
is a commonly used design pattern in distributed and enterprise applications.
It involves the creation and use of independent <em>services</em> that work together
to produce the desired result. The most important benefits, of course, are
separation of concerns and the ability to scale each service independent of
others, leading to a clean, modular&nbsp;design.</p>
<p>A common problem faced during the design of a <span class="caps">SOA</span> system is the choice of
communication protocol. Ideally we want our services to communicate with each
other with minimum communication overhead. This&nbsp;involves:</p>
<ul class="simple">
<li>Low&nbsp;latency</li>
<li>High&nbsp;throughput</li>
</ul>
<p>Many open source protocols are available for use in <span class="caps">SOA</span>. Some of them also
provide client/server de-serialization/serialization libraries to make your job
easier. Examples&nbsp;are:</p>
<ul class="simple">
<li><a class="reference external" href="https://developers.google.com/protocol-buffers/">Protocol&nbsp;Buffers</a></li>
<li><a class="reference external" href="https://thrift.apache.org/">Apache&nbsp;Thrift</a></li>
<li><a class="reference external" href="http://avro.apache.org/">Apache&nbsp;Avro</a></li>
</ul>
<p>Some people also like to use <span class="caps">SOAP</span>, <span class="caps">XML</span>-<span class="caps">RPC</span>, <span class="caps">JSON</span>-<span class="caps">RPC</span> etc. I have attempted to
cover the (mis)use of <span class="caps">HTTP</span>/<span class="caps">REST</span> as a <span class="caps">SOA</span> protocol in this&nbsp;article.</p>
<p>Consider 2 clients accessing a web front-end for some data. The web frontend
server is responsible for some preprocessing (authentication etc.) and
post-processing (aggregation etc.) tasks. The heavy lifting is done by our
backend&nbsp;service.</p>
<p><img alt="SOA-Image" src="http://www.j4nu5.com/images/soa.png" /></p>
<p>Let us say Client1 came first and requested for Data1. The web frontend
performs some preprocessing on the request and forwards it to our backend
service over <span class="caps">HTTP</span>. Meanwhile Client2 came along and requested for Data2. Now,
if our backend service has not yet returned with Client1&#8217;s request, the web
frontend cannot effectively re-use (multiplex) the <span class="caps">TCP</span> connection between
itself and our backend service since the <span class="caps">HTTP</span> protocol requires servers to
return responses in the same order as requests. Our web frontend will need to
create a new <span class="caps">TCP</span> connection for each concurrent request which is extremely
wasteful. <a class="reference external" href="http://www.chromium.org/spdy/spdy-protocol/spdy-protocol-draft2"><span class="caps">SPDY</span></a>
has tried to address the multiplexing issue but it may be a bit away from
production grade quality&nbsp;yet.</p>
<p>Another problem is <span class="caps">HTTP</span>/1.1&#8217;s use of <span class="caps">ASCII</span>. Sure it makes things easier to
debug but again is wasteful in <span class="caps">SOA</span>. Ideally we want a tightly packed binary&nbsp;protocol.</p>
<p><span class="caps">HTTP</span>/1.1&#8217;s statelessness is another cause of worries. It is simply wasteful
to send the same set of headers for similar requests. Again, <span class="caps">SPDY</span> and <span class="caps">HTTP</span>/2.0
are trying header compression and may be worth
<a class="reference external" href="http://chimera.labs.oreilly.com/books/1230000000545/ch12.html#HTTP2_HEADER_COMPRESSION">looking into</a>.</p>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p><span class="caps">HTTP</span>/1.1 is an excellent protocol for a traditional client/server model. It is
an <span class="caps">ASCII</span> protocol, hence it is easy to debug. It is fairly well known, has a
number of supporting libraries in almost all major languages and provides a
useful set of primitives and verbs for almost all of your data transfer needs.
However, please do not use it if you are creating a production grade <span class="caps">SOA</span>&nbsp;application.</p>
</div>
	

	</article>

    <p>
	<a href="https://twitter.com/share" class="twitter-share-button" data-via="" data-lang="en" data-size="large" data-related="">Tweet</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</p>

	<div class="comments">
	<h2>Comments !</h2>
	    <div id="disqus_thread"></div>
	    <script type="text/javascript">
	       var disqus_identifier = "implementing-service-oriented-architecture-using-http-is-a-horrible-idea.html";
	       (function() {
	       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	       dsq.src = 'http://j4nu5.disqus.com/embed.js';
	       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	      })();
	    </script>
	</div>

		  </div>	
		  
		  <div class="sidebar">
		    <div class="sidebar-container" id="sidebar-container-fixed">

	            <aside>
	              <h2>About</h2>
			      <p>
                    Kushagra Sinha. Software Engineer at MobStac. Love python, distributed systems, reading and sleeping.
			      </p>
			    </aside>

  	          <nav>
	            <h2>Categories</h2>
	            <ul>
	                <li class="active"><a href="http://www.j4nu5.com/category/programming.html">Programming</a></li>
	                <li ><a href="http://www.j4nu5.com/category/random.html">Random</a></li>
	            </ul>
	          </nav>

	            <aside>
	            <h2>Social</h2>
			      <ul class="social">
				    <li><a href="https://twitter.com/j4nu5">Twitter</a><i></i></li>
				    <li><a href="https://www.linkedin.com/in/sinhakushagra">LinkedIn</a><i></i></li>
				    <li><a href="https://github.com/j4nu5/">GitHub</a><i></i></li>
				    <li><a href="https://plus.google.com/+KushagraSinha/">Google+</a><i></i></li>
			      </ul>
			    </aside>

	            <aside>
	              <h2>Blogroll</h2>
	              <ul>
	                  <li><a href="http://www.mobstac.com/">MobStac</a></li>
	                  <li><a href="http://blog.mobstac.com/">MobStac's blog</a></li>
	              </ul>
	            </aside>
	        </div>
		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  Kushagra Sinha - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-sober">pelican-sober</a>.
    	</p>

	  </footer>	

	</div>
	
	  <script>
		var _gaq=[['_setAccount','UA-24193913-1'],['_trackPageview']];
		(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
		g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g,s)}(document,'script'));
	  </script>

</body>
</html>