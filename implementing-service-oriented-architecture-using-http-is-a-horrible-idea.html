<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://www.j4nu5.com/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="http://www.j4nu5.com/theme/stylesheet/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="http://www.j4nu5.com/theme/stylesheet/font-awesome.min.css">


    <link href="http://www.j4nu5.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Janus List Atom">



  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

<meta name="author" content="Kushagra Sinha" />
<meta name="description" content="Service Oriented Architecture is a commonly used design pattern in distributed and enterprise applications. It involves the creation and use of independent services that work together to produce the desired result. The most important benefits, of course, are separation of concerns and the ability to scale each service independent of ..." />
<meta name="keywords" content="programming, infrastructure">
<meta property="og:site_name" content="The Janus List"/>
<meta property="og:title" content="Implementing Service Oriented Architecture using Http is a horrible idea"/>
<meta property="og:description" content="Service Oriented Architecture is a commonly used design pattern in distributed and enterprise applications. It involves the creation and use of independent services that work together to produce the desired result. The most important benefits, of course, are separation of concerns and the ability to scale each service independent of ..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://www.j4nu5.com/implementing-service-oriented-architecture-using-http-is-a-horrible-idea.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2014-11-16 00:00:00+05:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://www.j4nu5.com/author/kushagra-sinha.html">
<meta property="article:section" content="Programming"/>
<meta property="article:tag" content="programming"/>
<meta property="article:tag" content="infrastructure"/>
<meta property="og:image" content="/images/pic.jpeg">
  <title>The Janus List &ndash; Implementing Service Oriented Architecture using Http is a horrible idea</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://www.j4nu5.com">
        <img src="/images/pic.jpeg" alt="The Janus List" title="The Janus List">
      </a>
      <h1><a href="http://www.j4nu5.com">The Janus List</a></h1>
      <p></p>
      <nav>
        <ul class="list">
          <li><a href="http://www.j4nu5.com/pages/about.html#about">About</a></li>
          <li><a href="http://www.j4nu5.com/pages/contact.html#contact">Contact</a></li>
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-twitter" href="https://twitter.com/j4nu5" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/sinhakushagra" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/j4nu5/" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-google" href="https://plus.google.com/+KushagraSinha/" target="_blank"><i class="fa fa-google"></i></a></li>
        <li><a class="sc-envelope-o" href="mailto:kush@j4nu5.com" target="_blank"><i class="fa fa-envelope-o"></i></a></li>
        <li><a class="sc-rss" href="None" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="http://www.j4nu5.com">Home</a>
      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="http://www.j4nu5.com/feeds/all.atom.xml">Atom</a>
    </nav>

<article>
  <header>
    <h1 id="implementing-service-oriented-architecture-using-http-is-a-horrible-idea">Implementing Service Oriented Architecture using Http is a horrible&nbsp;idea</h1>
    <p>Posted on Sun 16 November 2014 in <a href="http://www.j4nu5.com/category/programming.html">Programming</a></p>
  </header>
  <div>
    <p><a class="reference external" href="http://en.wikipedia.org/wiki/Service-oriented_architecture">Service Oriented Architecture</a>
is a commonly used design pattern in distributed and enterprise applications.
It involves the creation and use of independent <em>services</em> that work together
to produce the desired result. The most important benefits, of course, are
separation of concerns and the ability to scale each service independent of
others, leading to a clean, modular&nbsp;design.</p>
<p>A common problem faced during the design of a <span class="caps">SOA</span> system is the choice of
communication protocol. Ideally we want our services to communicate with each
other with minimum communication overhead. This&nbsp;involves:</p>
<ul class="simple">
<li>Low&nbsp;latency</li>
<li>High&nbsp;throughput</li>
</ul>
<p>Many open source protocols are available for use in <span class="caps">SOA</span>. Some of them also
provide client/server de-serialization/serialization libraries to make your job
easier. Examples&nbsp;are:</p>
<ul class="simple">
<li><a class="reference external" href="https://developers.google.com/protocol-buffers/">Protocol&nbsp;Buffers</a></li>
<li><a class="reference external" href="https://thrift.apache.org/">Apache&nbsp;Thrift</a></li>
<li><a class="reference external" href="http://avro.apache.org/">Apache&nbsp;Avro</a></li>
</ul>
<p>Some people also like to use <span class="caps">SOAP</span>, <span class="caps">XML</span>-<span class="caps">RPC</span>, <span class="caps">JSON</span>-<span class="caps">RPC</span> etc. I have attempted to
cover the (mis)use of <span class="caps">HTTP</span>/<span class="caps">REST</span> as a <span class="caps">SOA</span> protocol in this&nbsp;article.</p>
<p>Consider 2 clients accessing a web front-end for some data. The web frontend
server is responsible for some preprocessing (authentication etc.) and
post-processing (aggregation etc.) tasks. The heavy lifting is done by our
backend&nbsp;service.</p>
<p><img alt="SOA-Image" src="http://www.j4nu5.com/images/soa.png" /></p>
<p>Let us say Client1 came first and requested for Data1. The web frontend
performs some preprocessing on the request and forwards it to our backend
service over <span class="caps">HTTP</span>. Meanwhile Client2 came along and requested for Data2. Now,
if our backend service has not yet returned with Client1&#8217;s request, the web
frontend cannot effectively re-use (multiplex) the <span class="caps">TCP</span> connection between
itself and our backend service since the <span class="caps">HTTP</span> protocol requires servers to
return responses in the same order as requests. Our web frontend will need to
create a new <span class="caps">TCP</span> connection for each concurrent request which is extremely
wasteful. <a class="reference external" href="http://www.chromium.org/spdy/spdy-protocol/spdy-protocol-draft2"><span class="caps">SPDY</span></a>
has tried to address the multiplexing issue but it may be a bit away from
production grade quality&nbsp;yet.</p>
<p>Another problem is <span class="caps">HTTP</span>/1.1&#8217;s use of <span class="caps">ASCII</span>. Sure it makes things easier to
debug but again is wasteful in <span class="caps">SOA</span>. Ideally we want a tightly packed binary&nbsp;protocol.</p>
<p><span class="caps">HTTP</span>/1.1&#8217;s statelessness is another cause of worries. It is simply wasteful
to send the same set of headers for similar requests. Again, <span class="caps">SPDY</span> and <span class="caps">HTTP</span>/2.0
are trying header compression and may be worth
<a class="reference external" href="http://chimera.labs.oreilly.com/books/1230000000545/ch12.html#HTTP2_HEADER_COMPRESSION">looking into</a>.</p>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p><span class="caps">HTTP</span>/1.1 is an excellent protocol for a traditional client/server model. It is
an <span class="caps">ASCII</span> protocol, hence it is easy to debug. It is fairly well known, has a
number of supporting libraries in almost all major languages and provides a
useful set of primitives and verbs for almost all of your data transfer needs.
However, please do not use it if you are creating a production grade <span class="caps">SOA</span>&nbsp;application.</p>
</div>

  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://www.j4nu5.com/tag/programming.html">programming</a>
      <a href="http://www.j4nu5.com/tag/infrastructure.html">infrastructure</a>
    </p>
  </div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'j4nu5';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</article>

    <footer>
        <p>&copy; Kushagra Sinha </p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24193913-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "name": "Implementing Service Oriented Architecture using Http is a horrible idea",
  "headline": "Implementing Service Oriented Architecture using Http is a horrible idea",
  "datePublished": "2014-11-16 00:00:00+05:30",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Kushagra Sinha",
    "url": "http://www.j4nu5.com/author/kushagra-sinha.html"
  },
  "image": "/images/pic.jpeg",
  "url": "http://www.j4nu5.com/implementing-service-oriented-architecture-using-http-is-a-horrible-idea.html",
  "description": "Service Oriented Architecture is a commonly used design pattern in distributed and enterprise applications. It involves the creation and use of independent services that work together to produce the desired result. The most important benefits, of course, are separation of concerns and the ability to scale each service independent of ..."
}
</script></body>
</html>